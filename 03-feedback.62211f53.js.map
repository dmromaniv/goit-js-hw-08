{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAEMC,EAAUC,SAASC,cAAc,kBAOvC,SAASC,EAAYC,GACnB,MAAMC,MAAEA,EAAKC,QAAEA,GAAYF,EAErBG,EAAaF,EAAMG,MAAMC,OACzBC,EAAeJ,EAAQE,MAAMC,OAEnC,GAAIF,GAAcG,EAAc,CAK9B,MAJkB,CAChB,CAACL,EAAMM,MAAOJ,EACd,CAACD,EAAQK,MAAOD,E,CAIpB,OAAO,I,CAlBTE,OAAOC,iBAAiB,QAuCxB,WACE,MAAMC,EAAaC,aAAaC,QA5CX,uBA6CrB,GAAIF,EAAY,CACd,MAAMT,MAAEA,EAAKC,QAAEA,GAAYN,EAAQI,SACnC,IACE,MAAMa,EAAaC,KAAKC,MAAML,GAC9BT,EAAMG,MAAQS,EAAWZ,MACzBC,EAAQE,MAAQS,EAAWX,O,CAC3B,MAAOc,GACPC,QAAQC,IAAI,0BAA4BF,EAAMT,K,MA/CpDX,EAAQa,iBAAiB,QAASU,EAAAzB,EAAA,EAoBlC,WACE,MAAM0B,EAAYrB,EAAYsB,KAAKrB,UAE/BoB,GACFT,aAAaW,QA7BM,sBA6BkBR,KAAKS,UAAUH,G,GAxBK,MAC7DxB,EAAQa,iBAAiB,UA2BzB,SAAsBe,GACpBA,EAAMC,iBAEN,MAAML,EAAYrB,EAAYyB,EAAME,cAAc1B,UAE9CoB,GAAWH,QAAQC,IAAIE,GAC3BI,EAAME,cAAcC,QACpBhB,aAAaiB,WAxCQ,sB","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash/throttle';\n\nconst FORM_STATE_KEY = 'feedback-form-state';\n\nconst formRef = document.querySelector('.feedback-form');\n\nwindow.addEventListener('load', initForm);\nformRef.addEventListener('input', throttle(setDataToStorage, 500));\nformRef.addEventListener('submit', clearStorage);\n\n// Get data from inputs\nfunction getFormData(elements) {\n  const { email, message } = elements;\n\n  const emailValue = email.value.trim();\n  const messageValue = message.value.trim();\n\n  if (emailValue && messageValue) {\n    const savedData = {\n      [email.name]: emailValue,\n      [message.name]: messageValue,\n    };\n    return savedData;\n  }\n  return null;\n}\n// Set input data to local storage\nfunction setDataToStorage() {\n  const inputData = getFormData(this.elements);\n\n  if (inputData) {\n    localStorage.setItem(FORM_STATE_KEY, JSON.stringify(inputData));\n  }\n}\n// Clear localStorage and log data in console\nfunction clearStorage(event) {\n  event.preventDefault();\n\n  const inputData = getFormData(event.currentTarget.elements);\n\n  if (inputData) console.log(inputData);\n  event.currentTarget.reset();\n  localStorage.removeItem(FORM_STATE_KEY);\n}\n// Init form on page load\nfunction initForm() {\n  const storedData = localStorage.getItem(FORM_STATE_KEY);\n  if (storedData) {\n    const { email, message } = formRef.elements;\n    try {\n      const parsedData = JSON.parse(storedData);\n      email.value = parsedData.email;\n      message.value = parsedData.message;\n    } catch (error) {\n      console.log('Can`t parce this data: ' + error.name); // \"SyntaxError\"\n    }\n  }\n}\n"],"names":["$8zd4h","parcelRequire","$945622fd0f572e60$var$formRef","document","querySelector","$945622fd0f572e60$var$getFormData","elements","email","message","emailValue","value","trim","messageValue","name","window","addEventListener","storedData","localStorage","getItem","parsedData","JSON","parse","error","console","log","$parcel$interopDefault","inputData","this","setItem","stringify","event","preventDefault","currentTarget","reset","removeItem"],"version":3,"file":"03-feedback.62211f53.js.map"}